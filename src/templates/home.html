{% extends 'layout.html' %}
{% block body %}
<div class="px-3 mt-5">
    <div class="row g-3">
        <!-- Manga Overview -->
        <div class="border rounded col-md-6">
            <h1 class="text-center">Manga Overview</h1>
            <hr>
            <div class="row g-3">
                <div class="col-md-4 text-center">
                    <p>{{ manga_data["manga_len"] }}</p>
                    <p>Total Manga</p>
                </div>
                <div class="col-md-4 text-center">
                    <p>{{ manga_data["manga_chapter_len"] }}</p>
                    <p>Chapter Read</p>
                </div>
                <div class="col-md-4 text-center">
                    <p>{{ manga_data["mean_score"] }}</p>
                    <p>Mean Score</p>
                </div>
            </div>
            <hr>
            <status>
                <h3>Status</h3>
                {% for key, value in manga_data["status"].items() %}
                <p class="fs-5">Total No. of {{ key }} Manga: {{ value }}</p>
                {% endfor %}
            </status>
            <hr>
            <genres>
                <h3>Genres</h3>
                {% for key, value in manga_data["genre"].items() %}
                <p class="fs-5">
                    <a href="{{ url_for('manga.search_genre', genre=key) }}"
                        class="text-decoration-underline text-reset">{{ key
                        }}</a>: {{ value }}
                </p>
                {% endfor %}
            </genres>
            <hr>
            <score>
                <h3>Score</h3>
                {% for key, value in manga_data["score"].items() %}
                <p class="fs-5">{{ key }}: {{ value }}</p>
                {% endfor %}
            </score>
        </div>
        <!-- Anime Overview -->
        <div class="border rounded col-md-6">
            <h1 class="text-center">Anime Overview</h1>
            <hr>
            <div class="row g-3">
                <div class="col-md-4 text-center">
                    <p>{{ anime_data["anime_len"] }}</p>
                    <p>Total Anime</p>
                </div>
                <div class="col-md-4 text-center">
                    <p>{{ anime_data["anime_episode_len"] }}</p>
                    <p>Episodes Watched</p>
                </div>
                <div class="col-md-4 text-center">
                    <p>{{ anime_data["mean_score"] }}</p>
                    <p>Mean Score</p>
                </div>
            </div>
            <hr>
            <status>
                <h3>Status</h3>
                {% for key, value in anime_data["status"].items() %}
                <p class="fs-5">Total No. of {{ key }} Anime: {{ value }}</p>
                {% endfor %}
            </status>
            <hr>
            <genres>
                <h3>Genres</h3>
                {% for key, value in anime_data["genre"].items() %}
                <p class="fs-5"><a href="{{ url_for('anime.search_genre', genre=key) }}"
                        class="text-decoration-underline text-reset">{{
                        key }}</a>: {{ value
                    }}</p>
                {% endfor %}
            </genres>
            <hr>
            <score>
                <h3>Score</h3>
                {% for key, value in anime_data["score"].items() %}
                <p class="fs-5">{{ key }}: {{ value }}</p>
                {% endfor %}
            </score>
        </div>
    </div>
</div>

<!-- Check For Update Modal -->
{% if show_update_modal %}
<script>
    // Trigger the modal using JavaScript
    document.addEventListener('DOMContentLoaded', function () {
        var staticBackdrop = new bootstrap.Modal(document.getElementById('staticBackdrop'));
        staticBackdrop.show();
    });
    function openGithubPage() {
        window.open("https://github.com/EdwinRodger/MyMangaDataBase/releases/latest");
    };
</script>
{% endif %}
<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">Update Available!</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                A new version of MyMangaDataBase is released!
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Not Now</button>
                <button type="button" class="btn btn-primary" onclick="openGithubPage()">Download</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}